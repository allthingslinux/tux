---
# Development/Customization Override File
#
# Docker Compose automatically uses this file if it exists (it's gitignored).
# Copy this to compose.override.yaml for local development or customizations.
#
# This allows developers and customizers to mount local files for faster iteration
# without modifying the main compose.yaml file (which is production-ready).
#
# Usage:
#   cp compose.override.yaml.example compose.override.yaml
#   docker compose up -d
#
# When to use:
#   - Developing migrations (test without rebuilding image)
#   - Forking with custom models (iterate on custom migrations)
#   - Patching code with model changes (test patches quickly)
#
# When NOT to use:
#   - Production deployments (migrations come from image)
#   - Using official image without source code (mount will break)
#   - Using official image with outdated source (mount will break)

services:
  tux:
    volumes:
      # Mount migrations for faster development/customization iteration
      # Without this, migrations come from the Docker image (production behavior)
      # Note: Mount to /app/src/tux/database/migrations (matches alembic.ini script_location)
      - ./src/tux/database/migrations:/app/src/tux/database/migrations:ro
